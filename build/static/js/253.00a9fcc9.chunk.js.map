{"version":3,"file":"static/js/253.00a9fcc9.chunk.js","mappings":"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","sources":["layout/Dashboard/components/Announcement.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport \"../css/styles.css\";\n\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { imageUrl } from \"../../../common/apis\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  announceDataFormSubmission,\n  dashboardSelector,\n} from \"../../../slices/Dashboard/dashboard\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport { getAnnouncement, getAllStreams } from \"../../../slices/api/simpleApi\";\nimport { toast } from \"react-toastify\";\nimport moment from \"moment\";\n\n\nconst Announcement = () => {\n  const dispatch = useDispatch();\n  const [announcement, setAnnouncement] = useState({\n    title: \"\",\n    description: \"\",\n    start_date: \"\",\n    end_date: \"\",\n    social_platform: \"\",\n    // Image: \"\",\n    imageUrl: \"\",\n  });\n\n  const { id } = useParams();\n  const token = localStorage.getItem(\"token\");\n\n  const { message } = useSelector(dashboardSelector);\n  let navigate = useNavigate();\n\n  useEffect(() => {\n    toast.success(message);\n  }, [message]);\n\n  useEffect(() => {\n    const callback = (data) => {\n      if (data.length) {\n        setAnnouncement(() => {\n          return {\n            ...announcement,\n            title: data[0].title,\n            description: data[0].description,\n            start_date: data[0].start_date,\n            end_date: data[0].end_date,\n            social_platform: data[0].social_platform,\n            imageUrl: data[0].image,\n          };\n        });\n      }\n    };\n    getAnnouncement(callback, token, id);\n  }, [id]);\n\n\n \n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const [startDate, setStartDate] = useState();\n  const [endDate, setEndDate] = useState();\n  const [social_active, setSocialActive] = useState([]);\n  const [error, setError] = useState({\n    title: 0,\n    description: 0,\n    start_date: 0,\n    end_date: 0,\n    social_platform: 0,\n  });\n\n  useEffect(() => {\n    if (!startDate) return;\n    let date = new Date(startDate);\n    let dateStartTime = date.toLocaleTimeString();\n    let mnth = (\"0\" + (date.getMonth() + 1)).slice(-2);\n    let day = (\"0\" + date.getDate()).slice(-2);\n    let finalDate = [date.getFullYear(), mnth, day].join(\"-\");\n\n   \n\n\n    setAnnouncement(() => {\n      return {\n        ...announcement,\n        start_date: moment(`${finalDate} ${dateStartTime}`).format('YYYY-MM-DD hh:mm:ss')\n      };\n    });\n  }, [startDate]);\n\n\n  useEffect(() => {\n    if (!endDate) return;\n    let date = new Date(endDate);\n    let dateEndTime = date.toLocaleTimeString();\n    let mnth = (\"0\" + (date.getMonth() + 1)).slice(-2);\n    let day = (\"0\" + date.getDate()).slice(-2);\n    let finalDate = [date.getFullYear(), mnth, day].join(\"-\");\n\n    setAnnouncement(() => {\n      return {\n        ...announcement,\n        end_date: moment(`${finalDate} ${dateEndTime}`).format('YYYY-MM-DD hh:mm:ss')\n      };\n    });\n  }, [endDate]);\n\n  const handleChange = (e) => {\n    setAnnouncement({ ...announcement, [e.target.name]: e.target.value });\n\n    if (e.target.name == \"userImage\") {\n      const file = e.target.files[0];\n      if (file.size > 1000000) {\n      \n        return;\n      }\n      setSelectedFile(e.target.files[0]);\n    }\n\n    return false;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if(!id){\n      let a = {};\n      for (const announcementKey in announcement) {\n        if (\n          announcement[announcementKey] == \"\" ||\n          announcement[announcementKey] == undefined\n        ) {\n          a[announcementKey] = 1;\n          setError({\n            ...a,\n          });\n        }\n      }\n  \n      for (let key in error) {\n        if (error[key] == 0) {\n          toast.error(\"Please fill details\");\n          return;\n        }\n      }\n    }\n \n\n    const formData = new FormData();\n    if (selectedFile) {\n   \n      formData.append(\"image\", selectedFile);\n    }\n    if(id){\n      formData.append(\"id\",id);\n    }\n    \n    formData.append(\"title\", announcement.title);\n    formData.append(\"description\", announcement.description);\n    formData.append(\"start_date\", announcement.start_date);\n    formData.append(\"end_date\", announcement.end_date);\n    formData.append(\"social_platform\", announcement.social_platform);\n \n\n    //Submit data\n    dispatch(announceDataFormSubmission(formData)).then((data) => {\n  \n      if (data.payload.statusCode == 201) {\n        navigate(\"../../dashboard/announcement/list\");\n      }\n      if (data.payload.statusCode == 202) {\n        navigate(\"../../dashboard/announcement/list\");\n      }\n    });\n\n    // toast.success(message)\n  };\n\n  useEffect(() => {\n    const callback = (data) => {\n   \n      setSocialActive({ ...data });\n    };\n    getAllStreams(callback, token);\n  }, []);\n\n\n  const handleChangeSocialActive = (e) => {\n    //setSocialActive(Array.isArray(e) ? e.map((x) => x.value) : []);\n    setAnnouncement((prevState) => {\n      return { ...prevState, [e.target.name]: [e.target.value] };\n    });\n  };\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <div className=\"card-title h5 justify-content-between m-0 d-flex align-items-center\">\n            <span>Add Announcements </span> {id && <Link className=\"btn theme-btn btn-sm\" to={`/dashboard/announcement/view/${id}`}>View</Link>}\n          </div>\n        </div>\n        <div className=\"card-body px-4\" >\n\n          <form className=\"\" onSubmit={handleSubmit}>\n            <div className=\"row\">\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\n                <label className=\"form-label\">\n                  <b>Title</b>\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={announcement.title}\n                  onChange={handleChange}\n                  name=\"title\"\n                />\n                {error.title == 1 ? (\n                  <span className=\"error-show\">Please fill valid title</span>\n                ) : null}\n              </div>\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\n                <label className=\"form-label\">\n                  <b>Social Media Platform</b>\n                </label>\n                {/* <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={announcement.social_platform}\n                  onChange={handleChange}\n                  name=\"social_platform\"\n                  autoComplete=\"off\"\n                />\n                {error.social_platform == 1 ? (\n                  <span className=\"error-show\">\n                    Please fill valid social Media\n                  </span>\n                ) : null} */}\n\n                    <select\n                    className=\"form-select\"\n                    name=\"social_platform\"\n                    onChange={handleChangeSocialActive}\n                  >\n                    {/* <option defaultValue>Select Event Type</option> */}\n                    <option value={announcement?.social_platform}>\n                        {announcement.social_platform ? announcement.social_platform : \"Social platform\"}\n                    </option>\n\n                    {Object.keys(social_active).map((keyName, keyIndex) => {\n                      return (\n                        <option key={keyIndex} value={keyName}>\n                          {keyName}\n                        </option>\n                      );\n                    })}\n                  </select>\n\n              </div>\n\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\n                <label className=\"form-label\">\n                  <b>Start Date</b>\n                </label>\n                <DatePicker\n                  selected={startDate}\n                  name=\"start_date_time\"\n                  onChange={(date) => setStartDate(date)}\n                  timeInputLabel=\"Time:\"\n                  dateFormat=\"yyyy-MM-dd hh:mm:ss \"\n                  showTimeInput\n                  value={announcement.start_date}\n                  className=\"form-control\"\n                  autoComplete=\"off\"\n                />\n                {error.start_date == 1 ? (\n                  <span className=\"error-show\">Please fill valid start date</span>\n                ) : null}\n              </div>\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\n                <label className=\"form-label\">\n                  <b>End Date</b>\n                </label>\n                <DatePicker\n                  selected={endDate}\n                  onChange={(date) => setEndDate(date)}\n                  timeInputLabel=\"Time:\"\n                  dateFormat=\"yyyy-MM-dd hh:mm:ss \"\n                  showTimeInput\n                  name=\"end_date_time\"\n                  value={announcement.end_date}\n                  className=\"form-control\"\n                  autoComplete=\"off\"\n                />\n                {error.start_date == 1 ? (\n                  <span className=\"error-show\">Please fill valid end date</span>\n                ) : null}\n              </div>\n\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\n                <label className=\"form-label\">\n                  <b>Description</b>\n                </label>\n                <textarea\n                  className=\"form-control \"\n                  name=\"description\"\n                  onChange={handleChange}\n                  rows=\"6\"\n                  value={announcement.description}\n                ></textarea>\n                {error.description == 1 ? (\n                  <span className=\"error-show\">Please fill description</span>\n                ) : null}\n              </div>\n              <div className=\"col-lg-6 col-sm-12 mt-3 d-flex\">\n                <div className=\"profile-img-thumb mt-1\" style={{width:\"24%\"}}> \n                  {announcement.imageUrl && (\n                    <img className=\"img-fluid\" src={`${imageUrl}${announcement.imageUrl}`} alt=\"Banner\" />\n                  )}\n                </div>\n                <div className=\"profile-img-group\">\n                  <label className=\"form-label\">\n                    <b>Upload Banner Thumb</b>\n                  </label>\n                  <input type=\"file\" className=\"form-control\" name=\"userImage\" onChange={handleChange} />\n                </div>\n              </div>\n\n\n\n              <div className=\"col-12 mt-3\">\n                <button type=\"submit\" className=\"btn theme-btn form-text\">\n                  Submit\n                </button>\n              </div>\n            </div>\n          </form>\n\n        </div>\n      </div>  \n\n      \n    </>\n  );\n};\n\nexport default Announcement;\n"],"names":["dispatch","useDispatch","useState","title","description","start_date","end_date","social_platform","imageUrl","announcement","setAnnouncement","id","useParams","token","localStorage","getItem","message","useSelector","dashboardSelector","navigate","useNavigate","useEffect","toast","getAnnouncement","data","length","image","selectedFile","setSelectedFile","startDate","setStartDate","endDate","setEndDate","social_active","setSocialActive","error","setError","date","Date","dateStartTime","toLocaleTimeString","mnth","getMonth","slice","day","getDate","finalDate","getFullYear","join","moment","format","dateEndTime","handleChange","e","target","name","value","files","size","getAllStreams","className","to","onSubmit","preventDefault","a","announcementKey","undefined","key","formData","FormData","append","announceDataFormSubmission","then","payload","statusCode","type","onChange","prevState","Object","keys","map","keyName","keyIndex","selected","timeInputLabel","dateFormat","showTimeInput","autoComplete","rows","style","width","src","alt"],"sourceRoot":""}