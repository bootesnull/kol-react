{"version":3,"file":"static/js/253.c77efca8.chunk.js","mappings":"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","sources":["layout/Dashboard/components/Announcement.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport \"../css/styles.css\";\r\n\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { imageUrl } from \"../../../common/apis\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  announceDataFormSubmission,\r\n  dashboardSelector,\r\n} from \"../../../slices/Dashboard/dashboard\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport { getAnnouncement, getAllStreams } from \"../../../slices/api/simpleApi\";\r\nimport { toast } from \"react-toastify\";\r\nimport moment from \"moment\";\r\n\r\n\r\nconst Announcement = () => {\r\n  const dispatch = useDispatch();\r\n  const [announcement, setAnnouncement] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    start_date: \"\",\r\n    end_date: \"\",\r\n    social_platform: \"\",\r\n    // Image: \"\",\r\n    imageUrl: \"\",\r\n  });\r\n\r\n  const { id } = useParams();\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const { message } = useSelector(dashboardSelector);\r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    toast.success(message);\r\n  }, [message]);\r\n\r\n  useEffect(() => {\r\n    const callback = (data) => {\r\n      if (data.length) {\r\n        setAnnouncement(() => {\r\n          return {\r\n            ...announcement,\r\n            title: data[0].title,\r\n            description: data[0].description,\r\n            start_date: data[0].start_date,\r\n            end_date: data[0].end_date,\r\n            social_platform: data[0].social_platform,\r\n            imageUrl: data[0].image,\r\n          };\r\n        });\r\n      }\r\n    };\r\n    getAnnouncement(callback, token, id);\r\n  }, [id]);\r\n\r\n\r\n \r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  const [startDate, setStartDate] = useState();\r\n  const [endDate, setEndDate] = useState();\r\n  const [social_active, setSocialActive] = useState([]);\r\n  const [error, setError] = useState({\r\n    title: 0,\r\n    description: 0,\r\n    start_date: 0,\r\n    end_date: 0,\r\n    social_platform: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!startDate) return;\r\n    let date = new Date(startDate);\r\n    let dateStartTime = date.toLocaleTimeString();\r\n    let mnth = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n    let day = (\"0\" + date.getDate()).slice(-2);\r\n    let finalDate = [date.getFullYear(), mnth, day].join(\"-\");\r\n\r\n   \r\n\r\n\r\n    setAnnouncement(() => {\r\n      return {\r\n        ...announcement,\r\n        start_date: moment(`${finalDate} ${dateStartTime}`).format('YYYY-MM-DD hh:mm:ss')\r\n      };\r\n    });\r\n  }, [startDate]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!endDate) return;\r\n    let date = new Date(endDate);\r\n    let dateEndTime = date.toLocaleTimeString();\r\n    let mnth = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n    let day = (\"0\" + date.getDate()).slice(-2);\r\n    let finalDate = [date.getFullYear(), mnth, day].join(\"-\");\r\n\r\n    setAnnouncement(() => {\r\n      return {\r\n        ...announcement,\r\n        end_date: moment(`${finalDate} ${dateEndTime}`).format('YYYY-MM-DD hh:mm:ss')\r\n      };\r\n    });\r\n  }, [endDate]);\r\n\r\n  const handleChange = (e) => {\r\n    setAnnouncement({ ...announcement, [e.target.name]: e.target.value });\r\n\r\n    if (e.target.name == \"userImage\") {\r\n      const file = e.target.files[0];\r\n      if (file.size > 1000000) {\r\n      \r\n        return;\r\n      }\r\n      setSelectedFile(e.target.files[0]);\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if(!id){\r\n      let a = {};\r\n      for (const announcementKey in announcement) {\r\n        if (\r\n          announcement[announcementKey] == \"\" ||\r\n          announcement[announcementKey] == undefined\r\n        ) {\r\n          a[announcementKey] = 1;\r\n          setError({\r\n            ...a,\r\n          });\r\n        }\r\n      }\r\n  \r\n      for (let key in error) {\r\n        if (error[key] == 0) {\r\n          toast.error(\"Please fill details\");\r\n          return;\r\n        }\r\n      }\r\n    }\r\n \r\n\r\n    const formData = new FormData();\r\n    if (selectedFile) {\r\n   \r\n      formData.append(\"image\", selectedFile);\r\n    }\r\n    if(id){\r\n      formData.append(\"id\",id);\r\n    }\r\n    \r\n    formData.append(\"title\", announcement.title);\r\n    formData.append(\"description\", announcement.description);\r\n    formData.append(\"start_date\", announcement.start_date);\r\n    formData.append(\"end_date\", announcement.end_date);\r\n    formData.append(\"social_platform\", announcement.social_platform);\r\n \r\n\r\n    //Submit data\r\n    dispatch(announceDataFormSubmission(formData)).then((data) => {\r\n  \r\n      if (data.payload.statusCode == 201) {\r\n        navigate(\"../../dashboard/announcement/list\");\r\n      }\r\n      if (data.payload.statusCode == 202) {\r\n        navigate(\"../../dashboard/announcement/list\");\r\n      }\r\n    });\r\n\r\n    // toast.success(message)\r\n  };\r\n\r\n  useEffect(() => {\r\n    const callback = (data) => {\r\n   \r\n      setSocialActive({ ...data });\r\n    };\r\n    getAllStreams(callback, token);\r\n  }, []);\r\n\r\n\r\n  const handleChangeSocialActive = (e) => {\r\n    //setSocialActive(Array.isArray(e) ? e.map((x) => x.value) : []);\r\n    setAnnouncement((prevState) => {\r\n      return { ...prevState, [e.target.name]: [e.target.value] };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <div className=\"card-title h5 justify-content-between m-0 d-flex align-items-center\">\r\n            <span>Announcements </span> {id && <Link className=\"btn theme-btn btn-sm\" to={`/dashboard/announcement/view/${id}`}>View</Link>}\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body px-4\" >\r\n\r\n          <form className=\"\" onSubmit={handleSubmit}>\r\n            <div className=\"row\">\r\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\r\n                <label className=\"form-label\">\r\n                  <b>Title</b>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  value={announcement.title}\r\n                  onChange={handleChange}\r\n                  name=\"title\"\r\n                />\r\n                {error.title == 1 ? (\r\n                  <span className=\"error-show\">Please fill valid title</span>\r\n                ) : null}\r\n              </div>\r\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\r\n                <label className=\"form-label\">\r\n                  <b>Social Media Platform</b>\r\n                </label>\r\n                {/* <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  value={announcement.social_platform}\r\n                  onChange={handleChange}\r\n                  name=\"social_platform\"\r\n                  autoComplete=\"off\"\r\n                />\r\n                {error.social_platform == 1 ? (\r\n                  <span className=\"error-show\">\r\n                    Please fill valid social Media\r\n                  </span>\r\n                ) : null} */}\r\n\r\n                    <select\r\n                    className=\"form-select\"\r\n                    name=\"social_platform\"\r\n                    onChange={handleChangeSocialActive}\r\n                  >\r\n                    {/* <option defaultValue>Select Event Type</option> */}\r\n                    <option value={announcement?.social_platform}>\r\n                        {announcement.social_platform ? announcement.social_platform : \"Social platform\"}\r\n                    </option>\r\n\r\n                    {Object.keys(social_active).map((keyName, keyIndex) => {\r\n                      return (\r\n                        <option key={keyIndex} value={keyName}>\r\n                          {keyName}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </select>\r\n\r\n              </div>\r\n\r\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\r\n                <label className=\"form-label\">\r\n                  <b>Start Date</b>\r\n                </label>\r\n                <DatePicker\r\n                  selected={startDate}\r\n                  name=\"start_date_time\"\r\n                  onChange={(date) => setStartDate(date)}\r\n                  timeInputLabel=\"Time:\"\r\n                  dateFormat=\"yyyy-MM-dd hh:mm:ss \"\r\n                  showTimeInput\r\n                  value={announcement.start_date}\r\n                  className=\"form-control\"\r\n                  autoComplete=\"off\"\r\n                />\r\n                {error.start_date == 1 ? (\r\n                  <span className=\"error-show\">Please fill valid start date</span>\r\n                ) : null}\r\n              </div>\r\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\r\n                <label className=\"form-label\">\r\n                  <b>End Date</b>\r\n                </label>\r\n                <DatePicker\r\n                  selected={endDate}\r\n                  onChange={(date) => setEndDate(date)}\r\n                  timeInputLabel=\"Time:\"\r\n                  dateFormat=\"yyyy-MM-dd hh:mm:ss \"\r\n                  showTimeInput\r\n                  name=\"end_date_time\"\r\n                  value={announcement.end_date}\r\n                  className=\"form-control\"\r\n                  autoComplete=\"off\"\r\n                />\r\n                {error.start_date == 1 ? (\r\n                  <span className=\"error-show\">Please fill valid end date</span>\r\n                ) : null}\r\n              </div>\r\n\r\n              <div className=\"col-lg-6 col-sm-12 mt-3\">\r\n                <label className=\"form-label\">\r\n                  <b>Description</b>\r\n                </label>\r\n                <textarea\r\n                  className=\"form-control \"\r\n                  name=\"description\"\r\n                  onChange={handleChange}\r\n                  rows=\"6\"\r\n                  value={announcement.description}\r\n                ></textarea>\r\n                {error.description == 1 ? (\r\n                  <span className=\"error-show\">Please fill description</span>\r\n                ) : null}\r\n              </div>\r\n              <div className=\"col-lg-6 col-sm-12 mt-3 d-flex\">\r\n                <div className=\"profile-img-thumb mt-1\" style={{width:\"24%\"}}> \r\n                  {announcement.imageUrl && (\r\n                    <img className=\"img-fluid\" src={`${imageUrl}${announcement.imageUrl}`} alt=\"Banner\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"profile-img-group\">\r\n                  <label className=\"form-label\">\r\n                    <b>Upload Banner Thumb</b>\r\n                  </label>\r\n                  <input type=\"file\" className=\"form-control\" name=\"userImage\" onChange={handleChange} />\r\n                </div>\r\n              </div>\r\n\r\n\r\n\r\n              <div className=\"col-12 mt-3\">\r\n                <button type=\"submit\" className=\"btn theme-btn form-text\">\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      </div>  \r\n\r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nexport default Announcement;\r\n"],"names":["dispatch","useDispatch","useState","title","description","start_date","end_date","social_platform","imageUrl","announcement","setAnnouncement","id","useParams","token","localStorage","getItem","message","useSelector","dashboardSelector","navigate","useNavigate","useEffect","toast","getAnnouncement","data","length","image","selectedFile","setSelectedFile","startDate","setStartDate","endDate","setEndDate","social_active","setSocialActive","error","setError","date","Date","dateStartTime","toLocaleTimeString","mnth","getMonth","slice","day","getDate","finalDate","getFullYear","join","moment","format","dateEndTime","handleChange","e","target","name","value","files","size","getAllStreams","className","to","onSubmit","preventDefault","a","announcementKey","undefined","key","formData","FormData","append","announceDataFormSubmission","then","payload","statusCode","type","onChange","prevState","Object","keys","map","keyName","keyIndex","selected","timeInputLabel","dateFormat","showTimeInput","autoComplete","rows","style","width","src","alt"],"sourceRoot":""}