"use strict";(self.webpackChunkkol_marketplace_new=self.webpackChunkkol_marketplace_new||[]).push([[253,45],{5253:function(e,a,t){t.r(a);var l=t(4942),s=t(1413),n=t(885),i=t(2791),r=(t(4986),t(9513)),o=t.n(r),c=(t(8639),t(3383)),d=t(3901),m=t(1389),u=t(6871),f=t(3504),h=t(8690),p=t(9085),g=t(438),x=t.n(g),j=t(184);a.default=function(){var e=(0,d.I0)(),a=(0,i.useState)({title:"",description:"",start_date:"",end_date:"",social_platform:"",imageUrl:""}),t=(0,n.Z)(a,2),r=t[0],g=t[1],v=(0,u.UO)().id,b=localStorage.getItem("token"),_=(0,d.v9)(m.Nb).message,N=(0,u.s0)();(0,i.useEffect)((function(){p.Am.success(_)}),[_]),(0,i.useEffect)((function(){(0,h.k5)((function(e){e.length&&g((function(){return(0,s.Z)((0,s.Z)({},r),{},{title:e[0].title,description:e[0].description,start_date:e[0].start_date,end_date:e[0].end_date,social_platform:e[0].social_platform,imageUrl:e[0].image})}))}),b,v)}),[v]),console.log(r);var Z=(0,i.useState)(null),w=(0,n.Z)(Z,2),y=w[0],S=w[1],D=(0,i.useState)(),C=(0,n.Z)(D,2),k=C[0],M=C[1],Y=(0,i.useState)(),I=(0,n.Z)(Y,2),T=I[0],F=I[1],U=(0,i.useState)([]),E=(0,n.Z)(U,2),P=E[0],A=E[1],L=(0,i.useState)({title:0,description:0,start_date:0,end_date:0,social_platform:0}),B=(0,n.Z)(L,2),O=B[0],z=B[1];(0,i.useEffect)((function(){if(k){var e=new Date(k),a=e.toLocaleTimeString(),t=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2),n=[e.getFullYear(),t,l].join("-");console.log(n,a),g((function(){return(0,s.Z)((0,s.Z)({},r),{},{start_date:x()("".concat(n," ").concat(a)).format("YYYY-MM-DD hh:mm:ss")})}))}}),[k]),console.log(r.start_date),(0,i.useEffect)((function(){if(T){var e=new Date(T),a=e.toLocaleTimeString(),t=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2),n=[e.getFullYear(),t,l].join("-");g((function(){return(0,s.Z)((0,s.Z)({},r),{},{end_date:x()("".concat(n," ").concat(a)).format("YYYY-MM-DD hh:mm:ss")})}))}}),[T]);var V=function(e){if(g((0,s.Z)((0,s.Z)({},r),{},(0,l.Z)({},e.target.name,e.target.value))),"userImage"==e.target.name){if(e.target.files[0].size>1e6)return void console.log("File is large");S(e.target.files[0])}return!1};(0,i.useEffect)((function(){(0,h.Ae)((function(e){A((0,s.Z)({},e))}),b)}),[]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"card",children:[(0,j.jsx)("div",{className:"card-header",children:(0,j.jsxs)("div",{className:"card-title h5 justify-content-between m-0 d-flex align-items-center",children:[(0,j.jsx)("span",{children:"Add Announcements "})," ",v&&(0,j.jsx)(f.rU,{className:"btn theme-btn btn-sm",to:"/dashboard/announcement/view/".concat(v),children:"View"})]})}),(0,j.jsx)("div",{className:"card-body px-4",children:(0,j.jsx)("form",{className:"",onSubmit:function(a){if(a.preventDefault(),!v){var t={};for(var l in r)""!=r[l]&&void 0!=r[l]||(t[l]=1,z((0,s.Z)({},t)));for(var n in O)if(0==O[n])return void p.Am.error("Please fill details")}var i=new FormData;y&&i.append("image",y),v&&i.append("id",v),i.append("title",r.title),i.append("description",r.description),i.append("start_date",r.start_date),i.append("end_date",r.end_date),i.append("social_platform",r.social_platform),e((0,m.L6)(i)).then((function(e){console.log(e),201==e.payload.statusCode&&N("../../dashboard/announcement/list"),202==e.payload.statusCode&&N("../../dashboard/announcement/list")}))},children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"Title"})}),(0,j.jsx)("input",{type:"text",className:"form-control",value:r.title,onChange:V,name:"title"}),1==O.title?(0,j.jsx)("span",{className:"error-show",children:"Please fill valid title"}):null]}),(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"Social Media Platform"})}),(0,j.jsxs)("select",{className:"form-select",name:"social_platform",onChange:function(e){g((function(a){return(0,s.Z)((0,s.Z)({},a),{},(0,l.Z)({},e.target.name,[e.target.value]))}))},children:[(0,j.jsx)("option",{value:null===r||void 0===r?void 0:r.social_platform,children:r.social_platform?r.social_platform:"Social platform"}),Object.keys(P).map((function(e,a){return(0,j.jsx)("option",{value:e,children:e},a)}))]})]}),(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"Start Date"})}),(0,j.jsx)(o(),{selected:k,name:"start_date_time",onChange:function(e){return M(e)},timeInputLabel:"Time:",dateFormat:"yyyy-MM-dd hh:mm:ss ",showTimeInput:!0,value:r.start_date,className:"form-control",autoComplete:"off"}),1==O.start_date?(0,j.jsx)("span",{className:"error-show",children:"Please fill valid start date"}):null]}),(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"End Date"})}),(0,j.jsx)(o(),{selected:T,onChange:function(e){return F(e)},timeInputLabel:"Time:",dateFormat:"yyyy-MM-dd hh:mm:ss ",showTimeInput:!0,name:"end_date_time",value:r.end_date,className:"form-control",autoComplete:"off"}),1==O.start_date?(0,j.jsx)("span",{className:"error-show",children:"Please fill valid end date"}):null]}),(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"Description"})}),(0,j.jsx)("textarea",{className:"form-control ",name:"description",onChange:V,rows:"6",value:r.description}),1==O.description?(0,j.jsx)("span",{className:"error-show",children:"Please fill description"}):null]}),(0,j.jsxs)("div",{className:"col-lg-6 col-sm-12 mt-3 d-flex",children:[(0,j.jsx)("div",{className:"profile-img-thumb mt-1",style:{width:"24%"},children:r.imageUrl&&(0,j.jsx)("img",{className:"img-fluid",src:"".concat(c.s).concat(r.imageUrl),alt:"Banner"})}),(0,j.jsxs)("div",{className:"profile-img-group",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("b",{children:"Upload Banner Thumb"})}),(0,j.jsx)("input",{type:"file",className:"form-control",name:"userImage",onChange:V})]})]}),(0,j.jsx)("div",{className:"col-12 mt-3",children:(0,j.jsx)("button",{type:"submit",className:"btn theme-btn form-text",children:"Submit"})})]})})})]})})}},4986:function(){}}]);
//# sourceMappingURL=253.a6b5c92d.chunk.js.map